\documentclass[a4paper,11pt]{book}
\title{Applications of boundary tracing in thermal radiation and capillarity}
\author{Conway}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Customisation
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Margins
%   NOTE: a 4cm inner margin is required for binding
\usepackage[
  bindingoffset=2cm,
  inner=2cm,
  outer=2.5cm,
  top=3cm,
  bottom=2.7cm,
]{geometry}

% Slightly-more-than-one spacing
% --------
% NOTE: for 11pt font, \onehalfspacing is defined as \setstretch{1.213}.
% See <https://github.com/rf-latex/setspace/blob/02cf9e0/setspace.sty#L350>.
% The general consensus is that
% (1) nobody knows what one-and-a-half and double spacing mean, and
% (2) large line spacing is ugly.
% See <https://tex.stackexchange.com/a/13803>.
\usepackage{setspace}
\setstretch{1.13}

% Heading styles
% --------
% Larger part headings label
% Smaller chapter headings
\usepackage{titlesec}
\titleformat{\part}[display]%
  {\setstretch{1.5}\normalfont\Huge\bfseries\filcenter}%
  {\partname~\thepart}%
  {0em}%
  {}
\titleformat{\chapter}[display]%
  {\setstretch{1}\normalfont\huge\bfseries\filright}%
  {\chaptertitlename~\thechapter}%
  {0em}%
  {}
\titlespacing*{\chapter}{0em}{0em}{3.3em}

% Table of contents
% --------
% Include Bibliography etc. but exclude Table of contents
\usepackage[nottoc]{tocbibind}

% Citations ordered by number with whitespace stripped for keys
\usepackage{cite}

% Symbols for footnotes
\renewcommand*{\thefootnote}{\fnsymbol{footnote}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Mathematical notation
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% General symbols ("\;" etc.)
\usepackage{amsmath}

% Paired delimiters ("\abs" etc.)
\usepackage{mathtools}

% Boxed equation emphasis
\usepackage{empheq}

% Physical units
\usepackage{siunitx}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Figures
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% External graphics
\usepackage{graphicx}

% Figures directory
\graphicspath{{figures/}}

% Subfigures with captions
\usepackage{subcaption}

% Centred figure content (with same label as file name)
%   #1  [\includegraphics options] default "width=\textwidth"
%   #2  {\includegraphics file name}
%   #3  {caption}
\newcommand{\centredfigurecontent}[3][width=\textwidth]{%
  \centering
  \includegraphics[#1]{#2}
  \caption{#3}
  \label{fig:#2}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Referencing
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Hyperlinks
\usepackage[hidelinks,bookmarksopen=true]{hyperref}

% URLs
\let\bareurl\url
\newcommand*{\urlopen}{\nolinkurl{<}}
\newcommand*{\urlclose}{\nolinkurl{>}}
\renewcommand*{\url}[1]{\urlopen\bareurl{#1}\urlclose}

% DOIs
\newcommand*{\doidomain}{https://doi.org/}
\newcommand*{\doi}[1]{\url{\doidomain #1}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Math macros
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Optional superscript
\newcommand*{\optionalsup}[1]{%
  \ifx \relax #1\relax
  \else
    ^{#1}%
  \fi
}

% Optional subscript
\newcommand*{\optionalsub}[1]{%
  \ifx \relax #1\relax
  \else
    _{#1}%
  \fi
}

% Opposite of \nonumber
\newcommand*{\yesnumber}{\addtocounter{equation}{1}\tag{\theequation}}

% Mathop spacing
\newcommand*{\mathopspace}{\mathop{}\!}

% More vertical space for lines containing fractions etc.
\newcommand*{\tallspace}{0.3em}

% Asymptotically
\newcommand*{\asy}{\sim}

% Defined equal to
\newcommand*{\defeq}{:=}

% Identically equal to
\newcommand*{\ideq}{\equiv}

% Bold vectors
\renewcommand*{\vec}[1]{\boldsymbol{\mathbf{#1}}}

% Bracketing
% --------
% Style guide for optional sizing argument:
%   *       for fraction-height, radical-height, or superscript-height content
%   [\big]  for text-height content which is bulky
%   [\Big]  for text-height content which a derivative (\pder) is acting upon
\DeclarePairedDelimiter{\curlybr}{\{}{\}}
\DeclarePairedDelimiter{\roundbr}{(}{)}
\DeclarePairedDelimiter{\squarebr}{[}{]}

% Evaluation
% --------
% Style guide for sizing argument (do not omit since left delimiter is "."):
%   *       for fraction-height or radical-height content
%   [\big]  for text-height or superscript-height content
\DeclarePairedDelimiter{\eval}{.}{\rvert}

% Del operator
\newcommand*{\del}{\mathopspace\vec{\nabla}}

% Partial differential
\newcommand*{\pd}{\mathopspace\partial}

% Partial derivative
% --------
%   #1  [order] default ""
%   #2  {dependent variable}
%   #3  {independent variable}
\newcommand*{\pder}[3][]{
  \frac{\pd\optionalsup{#1}#2}{{\pd #3}\optionalsup{#1}}
}

% Total differential
% --------
% Style guide:
%   {\td x}   for the denominator of a derivative after "/"
%             (see <https://tex.stackexchange.com/a/68303>)
%   {\td s}^2 for the square of a differential
%             with thin space "\," before or after as necessary
\newcommand*{\td}{\mathopspace\mathrm{d}}

% Total derivative
% --------
%   #1  [order] default ""
%   #2  {dependent variable}
%   #3  {independent variable}
\newcommand*{\tder}[3][]{
  \frac{\td\optionalsup{#1}#2}{{\td #3}\optionalsup{#1}}
}

% Component of a vector
\newcommand*{\comp}[2]{#1_{#2}}

% Cross product
\newcommand*{\crossp}{\boldsymbol{\times}}

% Dot product
\newcommand*{\dotp}{\boldsymbol{\cdot}}

% Absolute value
\DeclarePairedDelimiter{\abs}{\lvert}{\rvert}

% Norm
\DeclarePairedDelimiter{\norm}{\lVert}{\rVert}

% Position vector
\newcommand*{\positionvec}{\vec{r}}

% Local (orthogonal) basis vector
\newcommand*{\localvec}[1]{\mathopspace\vec{h}_{#1}}

% Scale factor
\newcommand*{\scalefac}[1][]{h\optionalsub{#1}}

% Orthonormal basis vector
\newcommand*{\basisvec}[1]{\mathopspace\vec{a}_{#1}}

% Normal vector
\newcommand*{\normalvec}{\mathopspace\vec{n}}

% Tangent vector
\newcommand*{\tangentvec}{\mathopspace\vec{t}}

% Scaled quantity
\newcommand*{\scaled}[1]{\hat{#1}}
\newcommand*{\scaleddel}{\mathopspace\scaled{\del}}
\newcommand*{\scalingmarks}{hats}

% Text quantity
\newcommand*{\textq}[1]{\curlybr*{\text{#1}}}

% Dimensionless group
\newcommand*{\group}[1]{\squarebr*{#1}}

% Generic constant
\newcommand*{\const}{\mathrm{const}}

% Natural exponential base
\newcommand*{\ee}{\mathrm{e}}

% Gamma function
\newcommand*{\gamm}{\mathopspace\Gamma}

% Hypergeometric function
\newcommand*{\hypergeo}{\mathopspace{_2F_1}}

% Order (Big-O)
\newcommand*{\order}{\mathopspace O}

% Conductivity
\newcommand*{\conduc}{k}

% Emissivity
\newcommand*{\emiss}{\epsilon}

% Stefan--Boltzmann constant
\newcommand*{\stefan}{\sigma}

% Dirichlet subscript
\newcommand*{\dir}{\mathrm{d}}

% Inflection subscript
\newcommand*{\infl}{\mathrm{i}}

% Abbreviation for natural
\newcommand*{\nat}{\natural}

% Important equation box
\newcommand*{\importantpadding}{\hspace{0.7em}}
\newcommand{\importantbox}[1]{%
  \fbox{%
    \importantpadding
      #1%
    \importantpadding
  }%
}
\newenvironment{important}[1]{%
  \setkeys{EmphEqEnv}{#1}%
  \setkeys{EmphEqOpt}{box=\importantbox}%
  \EmphEqMainEnv
}{%
  \endEmphEqMainEnv
}

% Phantom plus sign
\newcommand*{\+}{\phantom{+}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Text macros
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Italicised term
\newcommand*{\term}[1]{\textit{#1}}

% Bring to attention
\newcommand*{\atten}[1]{\textbf{#1}}

% Code
\newcommand*{\code}[1]{\texttt{#1}}

% Programming language
\newcommand*{\lang}[1]{\textsf{#1}}

% Figure style (in caption)
\newcommand*{\figurestyle}[1]{[#1]}

% Names containing non-ASCII characters
\newcommand*{\lame}{Lam\'e}
\newcommand*{\laplaceyoung}{Laplace--Young}
\newcommand*{\stefanboltz}{Stefan--Boltzmann}

% Italicised foreign phrases
\newcommand*{\foreign}[1]{\textit{#1}}
\newcommand*{\foreignspace}{\nolinebreak[3]\ }
\makeatletter
  \newcommand*{\adhoc}{\foreign{ad\foreignspace hoc}}
  \newcommand*{\etalraw}{et\foreignspace al}
  \newcommand*{\etal}{%
    \@ifnextchar.{%
      \foreign{\etalraw}%
    }{%
      \foreign{\etalraw.\@}%
    }%
  }
\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% TODO and temporary
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Line numbers
\usepackage{lineno}
\linenumbers

% STRUCTURE
% + Boundary tracing ODE (integrate this)
%   -> Traced boundaries (patch these curves)
%   -> Radiation boundaries (join with T = const)
%   -> Domains

% TODO list
% + Append ($+$) or ($-$) to upper and lower for clarity.
% + Check acronym/abbreviation spacings: abbr.\@ ABC\@.
% + Check display equation punctuation and enforce consistency
% + Reduce spacing between figure content and caption
% + Manually tweak kerning for subscript text in figures
% + Coerce figures to be on the same page turn if possible
%   i.e. [even-page | odd-page]
% + Perhaps put {fig:plane-traced-boundaries-patched} and {fig:plane-domains}
%   one above the other on the same page,
%   so that there is exact horizontal alignment.
% + Show DOIs in bibliography
% + Title page
% + Bureaucratic stuff (declarations etc.)
% + Acknowledgements
% + Fix "Underfull \vbox (badness ...)" warnings
% + Prefer "Background" over "BackgroundDarker" style (see FigureStyles.wl)
%   where possible
% + Fix unwanted lines in RegionPlot exported to PDF
%   See <https://mathematica.stackexchange.com/q/2629> etc.
% + Remove line numbers
% + Make the PDF file size as small as possible
% + Remove this TODO section

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Document
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\frontmatter

\tableofcontents

\mainmatter

\include{introduction}
\include{curvilinear}

\part{Thermal radiation}
\label{pt:radiation}

\include{cartesian}
\include{polar}
\include{bipolar}

\backmatter

\bibliographystyle{conway}
\bibliography{bibliography}

\end{document}
